(function(a){a.fn.apc=function(){var p={ajax_processing:new Array(),visible_num:new Array(),preloaded_num:new Array(),total_items:new Array(),initial_offset:new Array(),blog_url:"",show_title:new Array(),show_excerpt:new Array(),post_type:new Array(),category:new Array(),tax_filters:new Array(),loop:new Array(),items:new Array(),list:new Array(),visible_container:new Array(),list_offset:new Array()};var r=function(){a(".apc_visible_container").css({overflow:"hidden"});a(".apc_list").css({margin:0,padding:0,position:"relative"})};var i=function(){r();a(".apc_out_container").each(function(B){a(this).attr("id","apc_carousel_"+B);var A=a(this).children(".apc_carousel_vars").val().split(",");p.visible_num[B]=Number(A[0]);p.preloaded_num[B]=Number(A[1]);p.total_items[B]=Number(A[2]);p.initial_offset[B]=Number(A[3]);p.blog_url=A[4];p.show_title[B]=A[5];p.show_excerpt[B]=A[6];p.loop[B]=A[7];p.post_type[B]=A[8];p.category[B]=A[9];d(A[10],B);p.items[B]=a(this).find(".apc_item");p.list[B]=a(this).find(".apc_list");p.visible_container[B]=a(this).find(".apc_visible_container");var C=p.items[B].length*p.items[B].outerWidth(true);p.list[B].width(C);p.list_offset[B]=0;var z=p.visible_num[B]*p.items[B].outerWidth(true);p.visible_container[B].width(z);a(this).width(z);w(B)})};var d=function(z,A){if(z){p.tax_filters[A]=new Array();var B=z.split("&");for(x in B){tax_term_array=B[x].split("=");p.tax_filters[A][tax_term_array[0]]=tax_term_array[1]}}};var w=function(z){p.visible_container[z].siblings(".apc_arrow.apc_next").bind("click",{direction:"next",car_index:z},y);p.visible_container[z].siblings(".apc_arrow.apc_prev").bind("click",{direction:"prev",car_index:z},y);c(z,0)};var y=function(B){B.preventDefault();if(a(this).hasClass("apc_active")){var z=B.data.car_index;if(B.data.direction=="next"){var A=p.list_offset[z]+p.visible_num[z]}else{var A=p.list_offset[z]-p.visible_num[z]}if(!p.ajax_processing[z]){var C=A+p.preloaded_num[z];if(p.items[z].length<Math.min(C,p.total_items[z])){m(z,C,A)}}q(z,A)}};var m=function(A,D,B){p.ajax_processing[A]=true;var C=p.initial_offset[A]+p.items[A].length;if(C>=p.total_items[A]){C=C-p.total_items[A]}var z=Math.min(D,p.total_items[A])-p.items[A].length;o(A,C,z,B)};var o=function(A,D,z,C){var B="action=ajax_apc_get_posts&offset="+D+"&num="+z+"&title="+p.show_title[A]+"&excerpt="+p.show_excerpt[A]+"&post_type="+p.post_type[A]+"&category="+p.category[A];for(j in p.tax_filters[A]){B+="&tax_"+j+"="+p.tax_filters[A][j]}a.ajax({type:"POST",url:p.blog_url+"/wp-admin/admin-ajax.php",data:B,success:function(E){f(E,A,C,p.items[A].length+z)},error:function(){k(A,C)}})};var f=function(B,A,D,z){s(B,A);var E=p.items[A].length;if(z>E){var C=z-E;o(A,0,C,D)}else{k(A,D)}};var k=function(z,A){p.ajax_processing[z]=false;c(z,A)};var s=function(A,z){p.list[z].append(A);p.items[z]=p.list[z].find(".apc_item");var B=p.items[z].length*p.items[z].outerWidth(true);p.list[z].width(B)};var q=function(z,A){if(p.loop[z]==1){if(A<0){u(z,A)}else{if(p.items[z].length==p.total_items[z]){h(z)}if(A>=p.total_items[z]){g(z,A)}else{e(z,A)}}}else{e(z,A)}};var e=function(z,A){p.list_offset[z]=A;c(z,A);b(z,A)};var b=function(A,B){var z=-1*p.items[A].outerWidth(true)*B;p.list[A].animate({left:z+"px"},600,"linear")};var h=function(C){var z=p.total_items[C]%p.visible_num[C];if(z==0){p.visible_num[C]}var B=2*p.visible_num[C]-z;var A=p.items[C].slice(0,B).clone();s(A,C)};var g=function(z,A){p.list_offset[z]=A-p.total_items[z];c(z,p.list_offset[z]);b(z,A);p.list[z].queue(function(){v(z,A);a(this).dequeue()})};var u=function(z,A){A=p.total_items[z]+A;p.list_offset[z]=A;c(z,A);p.list[z].queue(function(){var B=-1*p.items[z].outerWidth(true)*(A+p.visible_num[z]);p.list[z].css({left:B});a(this).dequeue()});b(z,A)};var v=function(A,B){var z=-1*(B-p.total_items[A])*p.items[A].outerWidth(true);p.list[A].css({left:z})};var c=function(z,A){t(p.visible_container[z].siblings(".apc_arrow"));if(A<=0&&!(p.loop[z]==1&&p.items[z].length>=p.total_items[z])){l(p.visible_container[z].siblings(".apc_prev"))}if(p.items[z].length<=A+p.visible_num[z]){if(p.ajax_processing[z]){n(p.visible_container[z].siblings(".apc_next"))}else{if(p.loop[z]!=1){l(p.visible_container[z].siblings(".apc_next"))}}}};var t=function(z){z.addClass("apc_active");z.removeClass("apc_inactive");z.removeClass("apc_ajax")};var n=function(z){z.addClass("apc_ajax");z.removeClass("apc_inactive");z.removeClass("apc_active")};var l=function(z){z.addClass("apc_inactive");z.removeClass("apc_ajax");z.removeClass("apc_active")};i()};a(function(){new a.fn.apc()})})(jQuery);